@inject IndexedDbService IndexedDbInteropService

@attribute [Route(AppStrings.Pages.Register)]

<_AddUserProfile />

@code {

	private string DisplayName { get; set; } = string.Empty;
	private string UserName { get; set; } = string.Empty;
	private string Password { get; set; } = string.Empty;
	private string ConfirmPassword { get; set; } = string.Empty;
	private string ErrorMessage { get; set; } = string.Empty;
	private IEnumerable<UserDto>? Users { get; set; }


	private async Task HandleSubmitClick()
	{
		try
		{
			if (ConfirmPassword != Password)
			{
				System.Diagnostics.Debug.WriteLine("Passwords do not match.");
				return;
			}

			var userDto = new UserDto
				{
					Id = 25,
					Name = DisplayName,
					UserName = UserName,
					Password = Password
				};
			int userId = await IndexedDbInteropService.AddNewUser(userDto);
			Users = await IndexedDbInteropService.GetUsers();
			System.Diagnostics.Debug.WriteLine($"User Id: {userId}");
		}
		catch (Exception ex)
		{
			ErrorMessage = ex.Message;
			System.Diagnostics.Debug.WriteLine(ex.Message);
		}

	}
}
